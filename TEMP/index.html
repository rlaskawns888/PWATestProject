<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="apple-touch-icon" href="https://d1hhkexwnh74v.cloudfront.net/app_icons/1x.png">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <script src="js/pwa.js"></script>
    <script src="js/status.js"></script>
    <link rel="manifest" href="js/pwa.webmanifest">
</head>
<body>
    <h1>Hello World</h1>
    <span>This in an examples for here article of progressive web apps that can be found in LogRocket</span>
    <br>
    <button class="add-button">Add to home screen</button>
    <span>You are now</span> <span><b class="page-status">online</b></span>
    
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker
                .register('js/service-worker.js')
                .then(() => { console.log('Service Worker Registered'); });
        }
    </script>
    <script>
        let deferredPrompt;
        const addBtn = document.querySelector('.add-button');
        addBtn.style.display = 'none';

        window.addEventListener('beforeinstallprompt', (e) => {
            // Prevent Chrome 67 and earlier from automatically showing the prompt
            e.preventDefault();
            // Stash the event so it can be triggered later.
            deferredPrompt = e;
            // Update UI to notify the user they can add to home screen
            addBtn.style.display = 'block';

            addBtn.addEventListener('click', () => {
            // hide our user interface that shows our A2HS button
            addBtn.style.display = 'none';
            // Show the prompt
            deferredPrompt.prompt();
            // Wait for the user to respond to the prompt
            deferredPrompt.userChoice.then((choiceResult) => {
                if (choiceResult.outcome === 'accepted') {
                console.log('User accepted the A2HS prompt');
                } else {
                console.log('User dismissed the A2HS prompt');
                }
                deferredPrompt = null;
            });
            });
        });
    </script>
</body>
</html>